<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Version 14 Migration Guide · Catalyst.jl</title><meta name="title" content="Version 14 Migration Guide · Catalyst.jl"/><meta property="og:title" content="Version 14 Migration Guide · Catalyst.jl"/><meta property="twitter:title" content="Version 14 Migration Guide · Catalyst.jl"/><meta name="description" content="Documentation for Catalyst.jl."/><meta property="og:description" content="Documentation for Catalyst.jl."/><meta property="twitter:description" content="Documentation for Catalyst.jl."/><meta property="og:url" content="https://docs.sciml.ai/Catalyst/stable/v14_migration_guide/"/><meta property="twitter:url" content="https://docs.sciml.ai/Catalyst/stable/v14_migration_guide/"/><link rel="canonical" href="https://docs.sciml.ai/Catalyst/stable/v14_migration_guide/"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-90474609-3"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-90474609-3', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Catalyst.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Catalyst.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Introduction to Catalyst</span><ul><li><a class="tocitem" href="../introduction_to_catalyst/catalyst_for_new_julia_users/">Introduction to Catalyst and Julia for New Julia users</a></li><li><a class="tocitem" href="../introduction_to_catalyst/introduction_to_catalyst/">Introduction to Catalyst</a></li><li><a class="tocitem" href="../introduction_to_catalyst/math_models_intro/">Mathematical Models Catalyst can Generate</a></li></ul></li><li><span class="tocitem">Model creation and properties</span><ul><li><a class="tocitem" href="../model_creation/dsl_basics/">The Catalyst DSL - Introduction</a></li><li><a class="tocitem" href="../model_creation/dsl_advanced/">The Catalyst DSL - Advanced Features and Options</a></li><li><a class="tocitem" href="../model_creation/programmatic_CRN_construction/">Programmatic Construction of Symbolic Reaction Systems</a></li><li><a class="tocitem" href="../model_creation/compositional_modeling/">Compositional Modeling of Reaction Systems</a></li><li><a class="tocitem" href="../model_creation/constraint_equations/">Constraint Equations and Events</a></li><li><a class="tocitem" href="../model_creation/conservation_laws/">Working with conservation laws</a></li><li><a class="tocitem" href="../model_creation/parametric_stoichiometry/">Symbolic Stochiometries</a></li><li><a class="tocitem" href="../model_creation/model_file_loading_and_export/">Loading Chemical Reaction Network Models from Files</a></li><li><a class="tocitem" href="../model_creation/model_visualisation/">Model Visualisation</a></li><li><a class="tocitem" href="../model_creation/reactionsystem_content_accessing/">Accessing model properties</a></li><li><a class="tocitem" href="../model_creation/network_analysis/">Network Analysis in Catalyst</a></li><li><a class="tocitem" href="../model_creation/chemistry_related_functionality/">Chemistry-related functionality</a></li><li><input class="collapse-toggle" id="menuitem-3-13" type="checkbox"/><label class="tocitem" for="menuitem-3-13"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../model_creation/examples/basic_CRN_library/">Library of Basic Chemical Reaction Network Models</a></li><li><a class="tocitem" href="../model_creation/examples/programmatic_generative_linear_pathway/">Programmatic, generative, modelling of a linear pathway</a></li><li><a class="tocitem" href="../model_creation/examples/hodgkin_huxley_equation/">Hodgkin-Huxley Equation</a></li><li><a class="tocitem" href="../model_creation/examples/smoluchowski_coagulation_equation/">Smoluchowski Coagulation Equation</a></li></ul></li></ul></li><li><span class="tocitem">Model simulation and visualization</span><ul><li><a class="tocitem" href="../model_simulation/simulation_introduction/">Model Simulation Introduction</a></li><li><a class="tocitem" href="../model_simulation/simulation_plotting/">Simulation plotting</a></li><li><a class="tocitem" href="../model_simulation/simulation_structure_interfacing/">Interfacing problems, integrators, and solutions</a></li><li><a class="tocitem" href="../model_simulation/ensemble_simulations/">Ensemble/Monte Carlo Simulations</a></li><li><a class="tocitem" href="../model_simulation/ode_simulation_performance/">Advice for performant ODE simulations</a></li><li><a class="tocitem" href="../model_simulation/sde_simulation_performance/">Advice for performant SDE simulations</a></li><li><input class="collapse-toggle" id="menuitem-4-7" type="checkbox"/><label class="tocitem" for="menuitem-4-7"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../model_simulation/examples/periodic_events_simulation/">Modelling a periodic event during ODE and jump simulations</a></li><li><a class="tocitem" href="../model_simulation/examples/interactive_brusselator_simulation/">Interactive Simulation and Plotting</a></li></ul></li></ul></li><li><span class="tocitem">Steady state analysis</span><ul><li><a class="tocitem" href="../steady_state_functionality/homotopy_continuation/">Finding Steady States through Homotopy Continuation</a></li><li><a class="tocitem" href="../steady_state_functionality/nonlinear_solve/">Finding Steady States using NonlinearSolve.jl and SteadyStateDiffEq.jl</a></li><li><a class="tocitem" href="../steady_state_functionality/steady_state_stability_computation/">Steady state stability computation</a></li><li><a class="tocitem" href="../steady_state_functionality/bifurcation_diagrams/">Bifurcation Diagrams</a></li><li><a class="tocitem" href="../steady_state_functionality/dynamical_systems/">Analysing model steady state properties with DynamicalSystems.jl</a></li></ul></li><li><span class="tocitem">Inverse problems</span><ul><li><a class="tocitem" href="../inverse_problems/optimization_ode_param_fitting/">Parameter Fitting for ODEs using Optimization.jl and DiffEqParamEstim.jl</a></li><li><a class="tocitem" href="../inverse_problems/behaviour_optimisation/">Optimization for non-data fitting purposes</a></li><li><a class="tocitem" href="../inverse_problems/global_sensitivity_analysis/">Global Sensitivity Analysis</a></li><li><input class="collapse-toggle" id="menuitem-6-4" type="checkbox"/><label class="tocitem" for="menuitem-6-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../inverse_problems/examples/ode_fitting_oscillation/">Fitting Parameters for an Oscillatory System</a></li></ul></li></ul></li><li><span class="tocitem">Spatial modelling</span><ul><li><a class="tocitem" href="../spatial_modelling/lattice_reaction_systems/">Introduction to Spatial Modelling with Catalyst</a></li><li><a class="tocitem" href="../spatial_modelling/lattice_simulation_structure_ interaction/">Interfacing with Lattice Problems, Integrators, and Solutions</a></li><li><a class="tocitem" href="../spatial_modelling/lattice_simulation_plotting/">Plotting Spatial Simulations</a></li><li><a class="tocitem" href="../spatial_modelling/spatial_ode_simulations/">Spatial ODE simulations</a></li><li><a class="tocitem" href="../spatial_modelling/spatial_jump_simulations/">Spatial jump simulations</a></li></ul></li><li><a class="tocitem" href="../faqs/">FAQs</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Version 14 Migration Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Version 14 Migration Guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/SciML/Catalyst.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/SciML/Catalyst.jl/blob/master/docs/src/v14_migration_guide.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Version-14-Migration-Guide"><a class="docs-heading-anchor" href="#Version-14-Migration-Guide">Version 14 Migration Guide</a><a id="Version-14-Migration-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Version-14-Migration-Guide" title="Permalink"></a></h1><p>Catalyst is built on the <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a> modelling language. A recent update of ModelingToolkit from version 8 to version 9 has required a corresponding update to Catalyst (from version 13 to 14). This update has introduced a couple of breaking changes, all of which will be detailed below.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Catalyst version 14 also introduces several new features. These will not be discussed here, however, they are described in Catalyst&#39;s <a href="https://github.com/SciML/Catalyst.jl/blob/master/HISTORY.md">history file</a>.</p></div></div><h2 id="System-completeness"><a class="docs-heading-anchor" href="#System-completeness">System completeness</a><a id="System-completeness-1"></a><a class="docs-heading-anchor-permalink" href="#System-completeness" title="Permalink"></a></h2><p>In ModelingToolkit v9 (and thus also Catalyst v14) all systems (e.g. <code>ReactionSystem</code>s and <code>ODESystem</code>s) are either <em>complete</em> or <em>incomplete</em>. Complete and incomplete systems differ in that</p><ul><li>Only complete systems can be used as inputs to simulations or most tools for model analysis.</li><li>Only incomplete systems can be <a href="../model_creation/compositional_modeling/#compositional_modeling">composed with other systems to form hierarchical models</a>.</li></ul><p>A model&#39;s completeness depends on how it was created:</p><ul><li>Models created programmatically (using the <code>ReactionSystem</code> constructor) are <em>not marked as complete</em> by default.</li><li>Models created using the <code>@reaction_network</code> DSL are <em>automatically marked as complete</em>.</li><li>To <em>use the DSL to create models that are not marked as complete</em>, use the <code>@network_component</code> macro (which in all other aspects is identical to <code>@reaction_network</code>).</li><li>Models generated through the <code>compose</code> and <code>extend</code> functions are <em>not marked as complete</em>.</li></ul><p>Furthermore, any systems generated through e.g. <code>convert(ODESystem, rs)</code>  are <em>not marked as complete</em>.</p><p>Complete models can be generated from incomplete models through the <code>complete</code> function. Here is a workflow where we take completeness into account in the simulation of a simple birth-death process.</p><pre><code class="language-julia hljs">using Catalyst
t = default_t()
@species X(t)
@parameters p d
rxs = [
    Reaction(p, [], [X]),
    Reaction(d, [X], [])
]
@named rs = ReactionSystem(rxs, t)</code></pre><p class="math-container">\[ \begin{align*}
\varnothing &amp;\xrightleftharpoons[d]{p} \mathrm{X}  
 \end{align*}
 \]</p><p>Here we have created a model that is not marked as complete. If our model is ready (i.e. we do not wish to compose it with additional models) we mark it as complete:</p><pre><code class="language-julia hljs">rs = complete(rs)</code></pre><p class="math-container">\[ \begin{align*}
\varnothing &amp;\xrightleftharpoons[d]{p} \mathrm{X}  
 \end{align*}
 \]</p><p>Here, <code>complete</code> does not change the input model, but simply creates a new model that is tagged as complete. We hence overwrite our model variable (<code>rs</code>) with <code>complete</code>&#39;s output. We can confirm that our model is complete using the <code>Catalyst.iscomplete</code> function:</p><pre><code class="language-julia hljs">Catalyst.iscomplete(rs)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>We can now go on and use our model for e.g. simulations:</p><pre><code class="language-julia hljs">using OrdinaryDiffEq, Plots
u0 = [X =&gt; 0.1]
tspan = (0.0, 10.0)
ps = [p =&gt; 1.0, d =&gt; 0.2]
oprob = ODEProblem(rs, u0, tspan, ps)
sol = solve(oprob)
plot(sol)</code></pre><img src="6c327b6b.svg" alt="Example block output"/><p>If we wish to first manually convert our <code>ReactionSystem</code> to an <code>ODESystem</code>, the generated <code>ODESystem</code> will <em>not</em> be marked as complete</p><pre><code class="language-julia hljs">osys = convert(ODESystem, rs)
Catalyst.iscomplete(osys)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><p>(note that <code>rs</code> must be complete before it can be converted to an <code>ODESystem</code> or any other system type)</p><p>If we now wish to create an <code>ODEProblem</code> from our <code>ODESystem</code>, we must first mark it as complete (using similar syntax as for our <code>ReactionSystem</code>):</p><pre><code class="language-julia hljs">osys = complete(osys)
oprob = ODEProblem(osys, u0, tspan, ps)
sol = solve(oprob)
plot(sol)</code></pre><img src="f341c68d.svg" alt="Example block output"/><p>Note, if we had instead used the <a href="../api/#Catalyst.@reaction_network"><code>@reaction_network</code></a> DSL macro to build our model, i.e.</p><pre><code class="language-julia hljs">rs2 = @reaction_network rs begin
    p, ∅ --&gt; X
    d, X --&gt; ∅
end</code></pre><p class="math-container">\[ \begin{align*}
\varnothing &amp;\xrightleftharpoons[d]{p} \mathrm{X}  
 \end{align*}
 \]</p><p>then the model is automatically marked as complete</p><pre><code class="language-julia hljs">Catalyst.iscomplete(rs2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>In contrast, if we used the <a href="../api/#Catalyst.@network_component"><code>@network_component</code></a> DSL macro to build our model it is not marked as complete, and is equivalent to our original definition of <code>rs</code></p><pre><code class="language-julia hljs">rs3 = @network_component rs begin
    p, ∅ --&gt; X
    d, X --&gt; ∅
end
Catalyst.iscomplete(rs3)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><h2 id="Unknowns-instead-of-states"><a class="docs-heading-anchor" href="#Unknowns-instead-of-states">Unknowns instead of states</a><a id="Unknowns-instead-of-states-1"></a><a class="docs-heading-anchor-permalink" href="#Unknowns-instead-of-states" title="Permalink"></a></h2><p>Previously, &quot;states&quot; was used as a term for system variables (both species and non-species variables). MTKv9 has switched to using the term &quot;unknowns&quot; instead. This means that there have been a number of changes to function names (e.g. <code>states</code> =&gt; <code>unknowns</code> and <code>get_states</code> =&gt; <code>get_unknowns</code>).</p><p>E.g. here we declare a <code>ReactionSystem</code> model containing both species and non-species unknowns:</p><pre><code class="language-julia hljs">using Catalyst
t = default_t()
D = default_time_deriv()
@species X(t)
@variables V(t)
@parameters p d Vmax

eqs = [
    Reaction(p, [], [X]),
    Reaction(d, [X], []),
    D(V) ~ Vmax - V*X*d/p
]
@named rs = ReactionSystem(eqs, t)</code></pre><p class="math-container">\[ \begin{align*}
\varnothing &amp;\xrightleftharpoons[d]{p} \mathrm{X} \\
\frac{\mathrm{d} V\left( t \right)}{\mathrm{d}t} &amp;= \mathtt{Vmax} + \frac{ - d X\left( t \right) V\left( t \right)}{p}  
 \end{align*}
 \]</p><p>We can now use <code>unknowns</code> to retrieve all unknowns</p><pre><code class="language-julia hljs">unknowns(rs)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{SymbolicUtils.BasicSymbolic{Real}}:
 X(t)
 V(t)</code></pre><p>Meanwhile, <code>species</code> and <code>nonspecies</code> (like previously) returns all species or non-species unknowns, respectively:</p><pre><code class="language-julia hljs">species(rs)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1-element Vector{SymbolicUtils.BasicSymbolic{Real}}:
 X(t)</code></pre><pre><code class="language-julia hljs">nonspecies(rs)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1-element Vector{SymbolicUtils.BasicSymbolic{Real}}:
 V(t)</code></pre><h2 id="Lost-support-for-most-units"><a class="docs-heading-anchor" href="#Lost-support-for-most-units">Lost support for most units</a><a id="Lost-support-for-most-units-1"></a><a class="docs-heading-anchor-permalink" href="#Lost-support-for-most-units" title="Permalink"></a></h2><p>As part of its v9 update, ModelingToolkit changed how units were handled. This includes using the package <a href="https://github.com/SymbolicML/DynamicQuantities.jl">DynamicQuantities.jl</a> to manage units (instead of <a href="https://github.com/PainterQubits/Unitful.jl">Unitful.jl</a>, like previously).</p><p>While this should lead to long-term improvements, unfortunately, as part of the process support for most units was removed. Currently, only the main SI units are supported (<code>s</code>, <code>m</code>, <code>kg</code>, <code>A</code>, <code>K</code>, <code>mol</code>, and <code>cd</code>). Composite units (e.g. <code>N = kg/(m^2)</code>) are no longer supported. Furthermore, prefix units (e.g. <code>mm = m/1000</code>) are not supported either. This means that most units relevant to Catalyst (such as <code>µM</code>) cannot be used directly. While composite units can still be written out in full and used (e.g. <code>kg/(m^2)</code>) this is hardly user-friendly.</p><p>The maintainers of ModelingToolkit have been notified of this issue. We are unsure when this will be fixed, however, we do not think it will be a permanent change.</p><h2 id="Removed-support-for-system-mutating-functions"><a class="docs-heading-anchor" href="#Removed-support-for-system-mutating-functions">Removed support for system-mutating functions</a><a id="Removed-support-for-system-mutating-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Removed-support-for-system-mutating-functions" title="Permalink"></a></h2><p>According to the ModelingToolkit system API, systems should not be mutable. In accordance with this, the following functions have been deprecated and removed: <code>addparam!</code>, <code>addreaction!</code>, <code>addspecies!</code>, <code>@add_reactions</code>, and <code>merge!</code>. Please use <code>ModelingToolkit.extend</code> and <code>ModelingToolkit.compose</code> to generate new merged and/or composed <code>ReactionSystems</code> from multiple component systems.</p><p>It is still possible to add default values to a created <code>ReactionSystem</code>, i.e. the <code>setdefaults!</code> function is still supported.</p><h2 id="New-interface-for-creating-time-variable-(t)-and-its-differential-(D)"><a class="docs-heading-anchor" href="#New-interface-for-creating-time-variable-(t)-and-its-differential-(D)">New interface for creating time variable (<code>t</code>) and its differential (<code>D</code>)</a><a id="New-interface-for-creating-time-variable-(t)-and-its-differential-(D)-1"></a><a class="docs-heading-anchor-permalink" href="#New-interface-for-creating-time-variable-(t)-and-its-differential-(D)" title="Permalink"></a></h2><p>Previously, the time-independent variable (typically called <code>t</code>) was declared using</p><pre><code class="language-julia hljs">using Catalyst
@variables t</code></pre><p>MTKv9 has introduced a standard global time variable, and as such a new interface has been developed:</p><pre><code class="language-julia hljs">t = default_t()</code></pre><p>Note that internally MTK9 actually represents <code>t</code> as a parameter, so the old approach should never be used. As the type of <code>t</code> is now considered internal to MTK, it should always be declared using the <code>default_t()</code> function.</p><p>Similarly, the time differential (primarily relevant when creating combined reaction-ODE models) used to be declared through</p><pre><code class="language-julia hljs">D = Differential(t)</code></pre><p>where now one must use</p><pre><code class="language-julia hljs">D = default_time_deriv()</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you look at ModelingToolkit documentation, these defaults are instead retrieved using <code>using ModelingToolkit: t_nounits as t, D_nounits as D</code>. This will also work, however, in Catalyst we have opted to instead use the functions <code>default_t()</code> and <code>default_time_deriv()</code> as our main approach.</p></div></div><h2 id="New-interface-for-accessing-problem/integrator/solution-parameter-(and-species)-values"><a class="docs-heading-anchor" href="#New-interface-for-accessing-problem/integrator/solution-parameter-(and-species)-values">New interface for accessing problem/integrator/solution parameter (and species) values</a><a id="New-interface-for-accessing-problem/integrator/solution-parameter-(and-species)-values-1"></a><a class="docs-heading-anchor-permalink" href="#New-interface-for-accessing-problem/integrator/solution-parameter-(and-species)-values" title="Permalink"></a></h2><p>Previously, it was possible to directly index problems to query them for their parameter values. e.g.</p><pre><code class="language-julia hljs">using Catalyst
rn = @reaction_network begin
    (p,d), 0 &lt;--&gt; X
end
u0 = [:X =&gt; 1.0]
ps = [:p =&gt; 1.0, :d =&gt; 0.2]
oprob = ODEProblem(rn, u0, (0.0, 1.0), ps)</code></pre><pre><code class="language-julia hljs">oprob[:p]</code></pre><p>This is <em>no longer supported</em>. When you wish to query a problem (or integrator or solution) for a parameter value (or to update a parameter value), you must append <code>.ps</code> to the problem variable name:</p><pre><code class="language-julia hljs">oprob.ps[:p]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.0</code></pre><p>Furthermore, a few new functions (<code>getp</code>, <code>getu</code>, <code>setp</code>, <code>setu</code>) have been introduced from <a href="https://github.com/SciML/SymbolicIndexingInterface.jl">SymbolicIndexingInterface</a> to support efficient and systematic querying and/or updating of symbolic unknown/parameter values. Using these can <em>significantly</em> improve performance when querying or updating a value multiple times, for example within a callback. These are described in more detail <a href="../model_simulation/simulation_structure_interfacing/#simulation_structure_interfacing_functions">here</a>.</p><p>For more details on how to query various structures for parameter and species values, please read <a href="../model_simulation/simulation_structure_interfacing/#simulation_structure_interfacing">this documentation page</a>.</p><h2 id="Other-changes"><a class="docs-heading-anchor" href="#Other-changes">Other changes</a><a id="Other-changes-1"></a><a class="docs-heading-anchor-permalink" href="#Other-changes" title="Permalink"></a></h2><h4 id="Modification-of-problems-with-conservation-laws-broken"><a class="docs-heading-anchor" href="#Modification-of-problems-with-conservation-laws-broken">Modification of problems with conservation laws broken</a><a id="Modification-of-problems-with-conservation-laws-broken-1"></a><a class="docs-heading-anchor-permalink" href="#Modification-of-problems-with-conservation-laws-broken" title="Permalink"></a></h4><p>While it is possible to update e.g. <code>ODEProblem</code>s using the <a href="../model_simulation/simulation_structure_interfacing/#simulation_structure_interfacing_problems_remake"><code>remake</code></a> function, this is currently not possible if the <code>remove_conserved = true</code> option was used. E.g. while</p><pre><code class="language-julia hljs">using Catalyst, OrdinaryDiffEq
rn = @reaction_network begin
    (k1,k2), X1 &lt;--&gt; X2
end
u0 = [:X1 =&gt; 1.0, :X2 =&gt; 2.0]
ps = [:k1 =&gt; 0.5, :k2 =&gt; 3.0]
oprob = ODEProblem(rn, u0, (0.0, 10.0), ps; remove_conserved = true)
solve(oprob)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">retcode: Success
Interpolation: 3rd order Hermite
t: 20-element Vector{Float64}:
  0.0
  0.05536058474854309
  0.1368921543286289
  0.23691776055035807
  0.3647452640516443
  0.5181768241347621
  0.7032499442458848
  0.9218427207235097
  1.1809560820028597
  1.4878245656164961
  1.8553258067660983
  2.301541207909663
  2.8560340777961457
  3.5657651849745395
  4.504325665984392
  5.720169214168568
  7.0556466053544575
  8.300369954846795
  9.396409386524946
 10.0
u: 20-element Vector{Vector{Float64}}:
 [1.0]
 [1.2768009764926864]
 [1.598201002968761]
 [1.8856679603236848]
 [2.1330276055231514]
 [2.3151847672884704]
 [2.437353976664483]
 [2.509038887565452]
 [2.5462300517652867]
 [2.562811179163304]
 [2.5690373020491437]
 [2.570916489397095]
 [2.5713454111215186]
 [2.5714134908255213]
 [2.571418521390035]
 [2.5713934443200475]
 [2.5712015896628526]
 [2.570503487801662]
 [2.5697839960706186]
 [2.5711751422315343]</code></pre><p>is perfectly fine, attempting to then modify any initial conditions or the value of the conservation constant in <code>oprob</code> will likely silently fail:</p><pre><code class="language-julia hljs">oprob_remade = remake(oprob; u0 = [:X1 =&gt; 5.0]) # NEVER do this.
solve(oprob_remade)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">retcode: Success
Interpolation: 3rd order Hermite
t: 20-element Vector{Float64}:
  0.0
  0.07000256876907468
  0.16937733745368116
  0.28764399118779477
  0.43374685539442936
  0.6041102726078713
  0.804520444614232
  1.0367832429167834
  1.3083422461455312
  1.62706962238776
  2.006733707713242
  2.466553291668488
  3.0377913984592837
  3.769914339176719
  4.73816431644583
  5.975296884340108
  7.304171039732028
  8.529857632284028
  9.6104931904345
 10.0
u: 20-element Vector{Vector{Float64}}:
 [5.0]
 [4.472265407637712]
 [3.9138604625923885]
 [3.4588373469265545]
 [3.103591573356568]
 [2.8645803203193125]
 [2.716800561012849]
 [2.6359178803287224]
 [2.5963679124550727]
 [2.579613502125178]
 [2.5736079627925657]
 [2.5718761537866097]
 [2.5714994537785847]
 [2.5714425786023063]
 [2.571439875134058]
 [2.5714728325076543]
 [2.5717054385556506]
 [2.572448700782985]
 [2.57308339675882]
 [2.571854821154085]</code></pre><p>This might generate a silent error, where the remade problem is different from the intended one (the value of the conserved constant will not be updated correctly).</p><p>This bug was likely present on earlier versions as well, but was only recently discovered. While we hope it will be fixed soon, the issue is in ModelingToolkit, and will not be fixed until its maintainers find the time to do so.</p><h4 id="Depending-on-parameter-order-is-even-more-dangerous-than-before"><a class="docs-heading-anchor" href="#Depending-on-parameter-order-is-even-more-dangerous-than-before">Depending on parameter order is even more dangerous than before</a><a id="Depending-on-parameter-order-is-even-more-dangerous-than-before-1"></a><a class="docs-heading-anchor-permalink" href="#Depending-on-parameter-order-is-even-more-dangerous-than-before" title="Permalink"></a></h4><p>In early versions of Catalyst, parameters and species were provided as vectors (e.g. <code>[1.0, 2.0]</code>) rather than maps (e.g. <code>[p =&gt; 1.0, d =&gt; 2.0]</code>). While we previously <em>strongly</em> recommended users to use the map form (or they might produce unintended results), the vector form was still supported (technically). Due to recent internal ModelingToolkit updates, the purely numeric form is no longer supported and should never be used – it will potentially lead to incorrect values for parameters and/or initial conditions. Note that if <code>rn</code> is a complete <code>ReactionSystem</code> you can now specify such mappings via <code>[rn.p =&gt; 1.0, rn.d =&gt; 2.0]</code>.</p><p><em>Users should never use vector-forms to represent parameter and species values</em></p><h4 id="Additional-deprecated-functions"><a class="docs-heading-anchor" href="#Additional-deprecated-functions">Additional deprecated functions</a><a id="Additional-deprecated-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-deprecated-functions" title="Permalink"></a></h4><p>The <code>reactionparams</code>, <code>numreactionparams</code>, and <code>reactionparamsmap</code> functions have been deprecated.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 1 November 2024 14:44">Friday 1 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
